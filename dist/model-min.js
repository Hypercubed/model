!function(){function t(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},0))}}function e(t){return!t.some(function(t){return"undefined"==typeof t||null===t})}function n(t){return this instanceof n?(this.$$values={},this.$$listeners={},this.$$trackedProperties={},this.observe(),void this.set(t)):new n(t)}function i(t){t.forEach(function(t){var e=t.name,n=t.object[e]||void 0,i=t.oldValue?t.oldValue[t.name]:void 0;t.object.emit(e,n,i)})}function o(t,e){return t.$$listeners[e]||(t.$$listeners[e]=[])}n.prototype.observe=function(){var t=this;Object.observe(t,i)},n.prototype.unobserve=function(){Object.unobserve(this,i),this.$$trackedProperties.forEach(function(t){this.$$listeners[t]=null}),this.$$values=null,this.$$listeners=null,this.$$trackedProperties=null},n.prototype.set=function(t){for(var e in t)this[e]=t[e]},n.prototype.on=function(t,e,n){n=n||this,o(this,t).push(e),t in this.$$trackedProperties||(this.$$trackedProperties[t]=!0)},n.prototype.off=function(t,e){this.$$listeners[t]=this.$$listeners[t].filter(function(t){return t!==e})},n.prototype.emit=function(t,e,n){var i=this;o(this,t).forEach(function(t){t.call(i,e,n)})},n.prototype.cancel=function(t){for(var e in this.$$listeners)this.off(e,t)},n.prototype.when=function(n,i,o){o=o||this;var r=this;n=n instanceof Array?n:[n];var s=t(function(){var t=n.map(function(t){return r[t]});e(t)&&i.apply(o,t)});return n.forEach(function(t){r.on(t,s)}),s},n.None="__NONE__","function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof exports?module.exports=n:this.Model=n}();